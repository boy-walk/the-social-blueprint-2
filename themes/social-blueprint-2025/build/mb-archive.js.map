{"version":3,"file":"mb-archive.js?ver=71f7b7b9d5c8fdeab713","mappings":"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","sources":["webpack://brads-boilerplate-theme/./src/scripts/Breadcrumbs.js","webpack://brads-boilerplate-theme/./src/scripts/Button.js","webpack://brads-boilerplate-theme/./src/scripts/FilterGroup.js","webpack://brads-boilerplate-theme/./src/scripts/MessageBoardArchivePage.js","webpack://brads-boilerplate-theme/./src/scripts/StyledCheckbox.js"],"sourcesContent":["// components/Breadcrumbs.jsx\nimport React from \"react\";\n\nexport function Breadcrumbs({ items = [], textColour = 'text-schemesOnSurfaceVariant' }) {\n  if (!items || !items.length) return null;\n\n  const filteredItems = items.map((it) => {\n    if (it.url.includes('events-calendar')) {\n      return { ...it, url: it.url.replace('events-calendar', 'events') };\n    }\n    return it;\n  })\n\n  return (\n    <nav aria-label=\"Breadcrumb\" className=\"mb-3 lg:mb-6\">\n      <ol className={`flex flex-wrap items-center gap-1 Blueprint-label-small lg:Blueprint-label-large ${textColour}`}>\n        {filteredItems.map((it, i) => (\n          <React.Fragment key={i}>\n            {i > 0 && <li className=\"px-1\">\n              {'>'}\n            </li>}\n            <li>\n              {it.url ? (\n                <a href={it.url} className=\"no-underline hover:underline \">{it.label}</a>\n              ) : (\n                <span>{it.label}</span>\n              )}\n            </li>\n          </React.Fragment>\n        ))}\n      </ol>\n    </nav>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport function Button({\n  className = '',\n  label = 'Label',\n  size = 'base',\n  variant = 'filled',\n  shape = 'square',\n  icon,\n  disabled = false,\n  onClick = () => { },\n  type = 'button',\n}) {\n  const sizeStyles = {\n    xs: 'px-3 py-1.5 Blueprint-label-small md:Blueprint-label-medium lg:Blueprint-label-large',\n    sm: 'px-4 py-2 Blueprint-label-small md:Blueprint-label-medium lg:Blueprint-label-large',\n    base: 'px-4 py-2.5 Blueprint-title-small md:Blueprint-title-medium lg:Blueprint-title-large',\n    lg: 'px-4 py-4 Blueprint-headline-small md:Blueprint-headline-medium lg:Blueprint-headline-large',\n    xl: 'px-8 py-6 Blueprint-headline-small md:Blueprint-headline-medium lg:Blueprint-headline-large',\n  }[size];\n\n  const rounded = {\n    square: { xs: 'rounded-xl', sm: 'rounded-xl', base: 'rounded-[16px]', lg: 'rounded-[16px]', xl: 'rounded-[28px]' },\n    pill: { xs: 'rounded-[100px]', sm: 'rounded-[100px]', base: 'rounded-[100px]', lg: 'rounded-[100px]', xl: 'rounded-[100px]' },\n  };\n\n  const variantStyles = {\n    filled: 'bg-[var(--schemesPrimary)] text-[var(--schemesOnPrimary)] hover:bg-[var(--palettesPrimary40)]',\n    tonal: 'bg-[var(--schemesPrimaryFixed)] text-[var(--schemesOnPrimaryFixedVariant)] hover:bg-[var(--schemesPrimaryFixedDim)]',\n    outline: 'border border-[var(--schemesOnPrimary)] text-[var(--schemesOnPrimary)] hover:bg-[var(--palettesOnPrimary40)]',\n    elevated: 'bg-[var(--schemesSurfaceContainerHigh)] text-[var(--schemesPrimary)] shadow-3x3 hover:bg-[var(--stateLayersSurfaceContainerHighOpacity08)]',\n    text: 'bg-transparent text-[var(--schemesPrimary)] hover:bg-[var(--palettesPrimary60)]',\n  }[variant];\n\n  // cursor + disabled handling\n  const disabledStyles = disabled ? 'opacity-50 cursor-not-allowed pointer-events-none' : '';\n  const baseCursor = disabled ? '' : 'cursor-pointer';\n\n  return (\n    <button\n      type={type}\n      onClick={onClick}\n      disabled={disabled}\n      aria-disabled={disabled}\n      className={clsx(\n        'inline-flex items-center justify-center gap-2 transition-colors duration-150',\n        baseCursor,            // pointer on hover for enabled buttons\n        sizeStyles,\n        rounded[shape][size],\n        variantStyles,\n        disabledStyles,        // overrides cursor when disabled\n        className\n      )}\n    >\n      {icon && <span className=\"shrink-0\">{icon}</span>}\n      <span className=\"Blueprint-label-large\">{label}</span>\n    </button>\n  );\n}\n","import { useMemo } from \"react\";\nimport { StyledCheckbox } from \"./StyledCheckbox\";\nimport { CaretRight } from \"@phosphor-icons/react\";\n\nexport function FilterGroup({ title, options, selected, onChangeHandler, expanded = false, onToggleExpand, onShowLess, initialShowCount = 8 }) {\n  const isNested = useMemo(\n    () => Array.isArray(options) && options.some(o => Array.isArray(o.children) && o.children.length > 0),\n    [options]\n  );\n\n  const parents = useMemo(() => (isNested ? options : options), [isNested, options]);\n\n  const totalCount = isNested ? parents.length : options.length;\n  const hasMore = totalCount > initialShowCount;\n  const displayCount = expanded ? totalCount : initialShowCount;\n\n  const isChecked = (id) => selected.includes(String(id));\n\n  const collectDescendantIds = (node, bag = []) => {\n    (node.children || []).forEach((c) => {\n      bag.push(String(c.id));\n      collectDescendantIds(c, bag);\n    });\n    return bag;\n  };\n\n  const anyChildSelected = (node) => {\n    const kids = collectDescendantIds(node, []);\n    return kids.some((id) => isChecked(id));\n  };\n\n  const fireChange = (id, checked) => {\n    onChangeHandler({ target: { value: String(id), checked: !!checked } });\n  };\n\n  const onParentChange = (node, checked) => {\n    if (checked) {\n      fireChange(node.id, true);\n      return;\n    }\n    fireChange(node.id, false);\n    const kids = collectDescendantIds(node, []);\n    kids.forEach((id) => {\n      if (isChecked(id)) fireChange(id, false);\n    });\n  };\n\n  const onChildChange = (parentNode, childNode, checked) => {\n    fireChange(childNode.id, checked);\n    if (checked && isChecked(parentNode.id)) {\n      fireChange(parentNode.id, false);\n    }\n  };\n\n  // one row of a child with connector lines\n  const ChildRow = ({ parentNode, childNode, isLast, depth = 0 }) => {\n    const show = isChecked(parentNode.id) || anyChildSelected(parentNode);\n    if (!show) return null;\n\n    const hasKids = Array.isArray(childNode.children) && childNode.children.length > 0;\n    const checked = isChecked(childNode.id);\n    const expanded = checked || (hasKids && anyChildSelected(childNode));\n\n    return (\n      <div key={`c-${childNode.id}`} className=\"w-full\">\n        <div\n          className=\"flex items-center gap-1\"\n          style={{ marginLeft: depth * 16 }}\n        >\n          {hasKids && (\n            <CaretRight\n              size={16}\n              weight=\"bold\"\n              className={`text-schemesOnSurfaceVariant transition-transform flex-shrink-0 ${expanded ? 'rotate-90' : ''}`}\n            />\n          )}\n          <div className=\"flex-1 min-w-0\">\n            <StyledCheckbox\n              id={childNode.id}\n              label={childNode.name}\n              checked={checked}\n              onChangeHandler={(e) => onChildChange(parentNode, childNode, e.target.checked)}\n            />\n          </div>\n        </div>\n        {hasKids && expanded && (\n          <div className=\"mt-4 mb-2 space-y-4\">\n            {childNode.children.map((g, idx) => (\n              <ChildRow\n                key={`c-${childNode.id}-${g.id}`}\n                parentNode={parentNode}\n                childNode={g}\n                isLast={idx === childNode.children.length - 1}\n                depth={depth + 1}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderParent = (node) => {\n    const checked = isChecked(node.id);\n    const expanded = checked || anyChildSelected(node);\n    const hasChildren = Array.isArray(node.children) && node.children.length > 0;\n\n    return (\n      <div key={`p-${node.id}`} className=\"w-full\">\n        <div className=\"flex items-center gap-1 my-1\">\n          {hasChildren && (\n            <CaretRight\n              size={16}\n              weight=\"bold\"\n              className={`text-schemesOnSurfaceVariant transition-transform flex-shrink-0 ${expanded ? 'rotate-90' : ''}`}\n            />\n          )}\n          <div className=\"flex-1 min-w-0\">\n            <StyledCheckbox\n              id={node.id}\n              label={node.name}\n              checked={checked}\n              onChangeHandler={(e) => onParentChange(node, e.target.checked)}\n            />\n          </div>\n        </div>\n\n        {hasChildren && expanded && (\n          <div className=\"relative mt-4 mb-2\">\n            <div className=\"pl-6 space-y-4\">\n              {node.children.map((child, idx) => (\n                <ChildRow\n                  key={`c-${child.id}`}\n                  parentNode={node}\n                  childNode={child}\n                  isLast={idx === node.children.length - 1}\n                  depth={0}\n                />\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // FLAT\n  if (!isNested) {\n    return (\n      <div className=\"mb-4\">\n        {title && <h3 className=\"Blueprint-title-small-emphasized text-schemesOnSurfaceVariant mb-3\">{title}</h3>}\n        <div className=\"flex flex-wrap gap-4\">\n          {options.slice(0, displayCount).map((option) => (\n            <StyledCheckbox\n              key={option.id}\n              id={option.id}\n              label={option.name}\n              checked={selected.includes(String(option.id))}\n              onChangeHandler={onChangeHandler}\n            />\n          ))}\n        </div>\n\n        {hasMore && !expanded && onToggleExpand && (\n          <button\n            type=\"button\"\n            onClick={onToggleExpand}\n            className=\"mt-2 text-sm text-schemesPrimary hover:underline Blueprint-label-large\"\n          >\n            Show all ({totalCount})\n          </button>\n        )}\n        {hasMore && expanded && onToggleExpand && (\n          <button\n            type=\"button\"\n            onClick={onShowLess}\n            className=\"mt-2 text-sm text-schemesPrimary hover:underline Blueprint-label-large\"\n          >\n            Show less\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  // NESTED\n  return (\n    <div className=\"mb-4\">\n      {title && <h3 className=\"Blueprint-title-small-emphasized text-schemesOnSurfaceVariant mb-3\">{title}</h3>}\n\n      <div className=\"flex flex-col gap-2\">\n        {(parents || []).slice(0, displayCount).map(renderParent)}\n      </div>\n\n      {hasMore && !expanded && onToggleExpand && (\n        <button\n          type=\"button\"\n          onClick={onToggleExpand}\n          className=\"mt-2 text-sm text-schemesPrimary hover:underline Blueprint-label-large\"\n        >\n          Show all ({totalCount})\n        </button>\n      )}\n    </div>\n  );\n}","import React, { useEffect, useMemo, useState, useRef } from \"react\";\nimport { FilterGroup } from \"./FilterGroup\";\nimport { Button } from \"./Button\";\nimport { MagnifyingGlassIcon, FunnelSimpleIcon, XIcon } from \"@phosphor-icons/react\";\nimport { Breadcrumbs } from \"./Breadcrumbs\";\n\nconst getCategoryColor = (label, isSelected = false) => {\n  const colors = [\n    { bg: \"bg-blue-100\", text: \"text-blue-800\", selectedBg: \"bg-blue-600\" },\n    { bg: \"bg-emerald-100\", text: \"text-emerald-800\", selectedBg: \"bg-emerald-600\" },\n    { bg: \"bg-amber-100\", text: \"text-amber-800\", selectedBg: \"bg-amber-600\" },\n    { bg: \"bg-rose-100\", text: \"text-rose-800\", selectedBg: \"bg-rose-600\" },\n    { bg: \"bg-violet-100\", text: \"text-violet-800\", selectedBg: \"bg-violet-600\" },\n    { bg: \"bg-cyan-100\", text: \"text-cyan-800\", selectedBg: \"bg-cyan-600\" },\n    { bg: \"bg-orange-100\", text: \"text-orange-800\", selectedBg: \"bg-orange-600\" },\n    { bg: \"bg-pink-100\", text: \"text-pink-800\", selectedBg: \"bg-pink-600\" },\n    { bg: \"bg-teal-100\", text: \"text-teal-800\", selectedBg: \"bg-teal-600\" },\n    { bg: \"bg-indigo-100\", text: \"text-indigo-800\", selectedBg: \"bg-indigo-600\" },\n    { bg: \"bg-lime-100\", text: \"text-lime-800\", selectedBg: \"bg-lime-600\" },\n    { bg: \"bg-fuchsia-100\", text: \"text-fuchsia-800\", selectedBg: \"bg-fuchsia-600\" },\n  ];\n\n  // Hash the label to get a consistent index\n  let hash = 0;\n  for (let i = 0; i < label.length; i++) {\n    hash = label.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  const index = Math.abs(hash) % colors.length;\n  const color = colors[index];\n\n  if (isSelected) {\n    return { bg: color.selectedBg, text: \"text-white\" };\n  }\n  return { bg: color.bg, text: color.text };\n};\n\nexport default function MessageBoardArchivePage(props) {\n  const {\n    postType,\n    taxonomy,\n    currentTerm,\n    filters = [],\n    endpoint,\n    baseQuery = {},\n    title,\n    subtitle,\n    breadcrumbs = [],\n    categories = [],\n  } = props;\n\n  const CPT = useMemo(() => (Array.isArray(postType) ? postType[0] : postType) || \"gd_discount\", [postType]);\n\n  // ---------------- State ----------------\n  const [page, setPage] = useState(1);\n\n  // Parse URL query params for initial category filter\n  const getInitialCategoryFromURL = () => {\n    if (typeof window === 'undefined') return null;\n    const params = new URLSearchParams(window.location.search);\n    return params.get('cat') || null;\n  };\n\n  // Seed once for taxonomy archives\n  const [selectedTerms, setSelectedTerms] = useState(() => {\n    if (taxonomy && currentTerm?.id) return { [taxonomy]: [String(currentTerm.id)] };\n    return {};\n  });\n\n  // Track if we've initialized from URL\n  const urlInitializedRef = useRef(false);\n  const initialCategorySlug = useRef(getInitialCategoryFromURL());\n\n  const [items, setItems] = useState([]);\n  const [totalPages, setTotalPages] = useState(1);\n  const [total, setTotal] = useState(undefined);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  // Filters / terms\n  const [termsOptions, setTermsOptions] = useState({});\n  const [descendantsMap, setDescendantsMap] = useState({});\n  const [retryTick, setRetryTick] = useState(0);\n\n  // ---- identify the \"Category\" taxonomy to promote to chips ----\n  const categoryFilter = useMemo(() => {\n    const re = /(_category|_categories|category|categories|cat)$/i;\n    return (filters || []).find((f) => f.isCategory || re.test(f.taxonomy));\n  }, [filters]);\n  const categoryTax = categoryFilter?.taxonomy || null;\n\n  // Sidebar filters (exclude the scoped taxonomy and the category)\n  const displayedFilters = useMemo(() => {\n    return (filters || []).filter(\n      (f) => f.taxonomy !== taxonomy && f.taxonomy !== categoryTax\n    );\n  }, [filters, taxonomy, categoryTax]);\n\n  // ---------------- Helpers ----------------\n  const buildTreeAndDescendants = (rows) => {\n    const byId = {};\n    rows.forEach((r) => {\n      const id = String(r.id);\n      byId[id] = { id, name: r.name, slug: r.slug, parent: String((r.parent ?? 0) || \"0\"), children: [] };\n    });\n    const roots = [];\n    rows.forEach((r) => {\n      const id = String(r.id);\n      const p = String(r.parent || \"0\");\n      if (p !== \"0\" && byId[p]) byId[p].children.push(byId[id]);\n      else roots.push(byId[id]);\n    });\n    const descendants = {};\n    const collect = (n) => {\n      let acc = [];\n      n.children.forEach((c) => { acc.push(String(c.id), ...collect(c)); });\n      descendants[String(n.id)] = acc;\n      return acc;\n    };\n    roots.forEach(collect);\n    const sortTree = (nodes) => {\n      nodes.sort((a, b) => a.name.localeCompare(b.name));\n      nodes.forEach((n) => sortTree(n.children));\n    };\n    sortTree(roots);\n    return { tree: roots, descendants };\n  };\n\n  // ---------------- Load term options ----------------\n  const fetchedOnceRef = useRef(new Set());\n\n  useEffect(() => {\n    const toFetch = [...displayedFilters];\n    if (categoryTax) toFetch.unshift({ taxonomy: categoryTax });\n\n    if (!toFetch.length) {\n      setTermsOptions({});\n      setDescendantsMap({});\n      return;\n    }\n    let cancelled = false;\n\n    (async () => {\n      const nextOptions = {};\n      const nextDesc = {};\n\n      for (const f of toFetch) {\n        const tax = f.taxonomy;\n        if (fetchedOnceRef.current.has(tax)) continue;\n        try {\n          const res = await fetch(\n            `/wp-json/tsb/v1/terms?taxonomy=${encodeURIComponent(tax)}&per_page=100`,\n            { headers: { Accept: \"application/json\" } }\n          );\n          if (!res.ok) throw new Error(`Terms fetch failed for ${tax} (HTTP ${res.status})`);\n          const json = await res.json();\n          const rows = (Array.isArray(json) ? json : []).map((t) => ({\n            id: String(t.id),\n            name: t.name,\n            slug: t.slug,\n            parent: String((t.parent ?? 0) || \"0\"),\n          }));\n\n          const isHier = rows.some((r) => r.parent !== \"0\");\n          if (isHier) {\n            const { tree, descendants } = buildTreeAndDescendants(rows);\n            nextOptions[tax] = tree;\n            nextDesc[tax] = descendants;\n          } else {\n            nextOptions[tax] = rows.map(({ id, name, slug }) => ({ id, name, slug }));\n          }\n\n          fetchedOnceRef.current.add(tax);\n        } catch {\n          nextOptions[f.taxonomy] = [];\n        }\n      }\n\n      if (!cancelled && (Object.keys(nextOptions).length || Object.keys(nextDesc).length)) {\n        setTermsOptions((prev) => ({ ...prev, ...nextOptions }));\n        setDescendantsMap((prev) => ({ ...prev, ...nextDesc }));\n      }\n    })();\n\n    return () => { cancelled = true; };\n  }, [displayedFilters, categoryTax]);\n\n  // ---------------- Scope filter UI for taxonomy archives (UI-only) ----------------\n  const didScopeRef = useRef(false);\n  useEffect(() => {\n    if (didScopeRef.current) return;\n    if (!taxonomy || !currentTerm?.id) return;\n    const opts = termsOptions[taxonomy];\n    if (!opts || !opts.length) return;\n\n    const isTree = Array.isArray(opts) && Array.isArray(opts[0]?.children);\n    if (isTree) {\n      const stack = [...opts];\n      let node = null;\n      while (stack.length) {\n        const n = stack.pop();\n        if (String(n.id) === String(currentTerm.id)) { node = n; break; }\n        (n.children || []).forEach(c => stack.push(c));\n      }\n      if (node) {\n        setTermsOptions((prev) => ({ ...prev, [taxonomy]: [node] }));\n        didScopeRef.current = true;\n      }\n    } else {\n      setTermsOptions((prev) => ({\n        ...prev,\n        [taxonomy]: (prev[taxonomy] || []).filter((o) => String(o.id) === String(currentTerm.id)),\n      }));\n      didScopeRef.current = true;\n    }\n  }, [termsOptions, taxonomy, currentTerm]);\n\n  // ---------------- Initialize category from URL query param ----------------\n  useEffect(() => {\n    if (urlInitializedRef.current) return;\n    if (!categoryTax || !initialCategorySlug.current) return;\n\n    const opts = termsOptions[categoryTax];\n    if (!opts || !opts.length) return;\n\n    // Find term by slug\n    const findBySlug = (items) => {\n      for (const item of items) {\n        if (item.slug === initialCategorySlug.current) {\n          return item;\n        }\n        // Check children if it's a tree structure\n        if (Array.isArray(item.children) && item.children.length > 0) {\n          const found = findBySlug(item.children);\n          if (found) return found;\n        }\n      }\n      return null;\n    };\n\n    const matchedTerm = findBySlug(opts);\n    if (matchedTerm) {\n      setSelectedTerms((prev) => ({\n        ...prev,\n        [categoryTax]: [String(matchedTerm.id)]\n      }));\n      urlInitializedRef.current = true;\n    }\n  }, [termsOptions, categoryTax]);\n\n  // ---------------- Fetch posts ----------------\n  const fetchSeq = useRef(0);\n\n  useEffect(() => {\n    let cancelled = false;\n    const seq = ++fetchSeq.current;\n\n    (async () => {\n      setLoading(true);\n      setError(\"\");\n      try {\n        const payload = { ...baseQuery, page };\n\n        // base tax\n        const baseTax = Array.isArray(baseQuery.tax)\n          ? baseQuery.tax.slice()\n          : baseQuery.tax ? [baseQuery.tax] : [];\n\n        // UI selections\n        const uiTax = [];\n        for (const [taxKey, termIds] of Object.entries(selectedTerms)) {\n          if (termIds && termIds.length) {\n            uiTax.push({\n              taxonomy: taxKey,\n              field: \"term_id\",\n              terms: termIds.map((id) => parseInt(id, 10)).filter(Number.isFinite),\n              operator: \"IN\",\n              include_children: true,\n            });\n          }\n        }\n\n        const finalTax = [...baseTax, ...uiTax];\n        if (finalTax.length) {\n          payload.tax = finalTax;\n          if (baseQuery.tax_relation) payload.tax_relation = baseQuery.tax_relation;\n        }\n\n        const res = await fetch(endpoint, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(payload),\n        });\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        const json = await res.json();\n\n        if (!cancelled && seq === fetchSeq.current) {\n          setItems(json.items || []);\n          setTotalPages(json.total_pages || 1);\n          setTotal(typeof json.total === \"number\" ? json.total : undefined);\n        }\n      } catch (err) {\n        if (!cancelled && seq === fetchSeq.current) setError(err.message || \"Failed to load data\");\n      } finally {\n        if (!cancelled && seq === fetchSeq.current) setLoading(false);\n      }\n    })();\n\n    return () => { cancelled = true; };\n  }, [baseQuery, endpoint, page, selectedTerms, retryTick]);\n\n  // ---------------- Client-side search ----------------\n  const searchIndex = useMemo(() => {\n    const idx = new Map();\n    const collect = (val, bag) => {\n      if (!val) return;\n      if (Array.isArray(val)) val.forEach(v => collect(v, bag));\n      else if (typeof val === \"object\") {\n        if (typeof val.name === \"string\") bag.push(val.name);\n        if (typeof val.slug === \"string\") bag.push(val.slug.replace(/-/g, \" \"));\n        Object.values(val).forEach(v => collect(v, bag));\n      } else if (typeof val === \"string\") bag.push(val);\n    };\n    (items || []).forEach((item) => {\n      const bag = [];\n      collect(item.title, bag);\n      collect(item.subtitle, bag);\n      collect(item.excerpt, bag);\n      collect(item.categories, bag);\n      collect(item.tags, bag);\n      collect(item.terms, bag);\n      collect(item.taxonomies, bag);\n      idx.set(item.id, bag.join(\" \").toLowerCase());\n    });\n    return idx;\n  }, [items]);\n\n  const filteredItems = useMemo(() => {\n    const q = searchQuery.trim().toLowerCase();\n    if (!q) return items;\n    const words = q.split(/\\s+/).filter(Boolean);\n    return items.filter((it) => {\n      const hay = searchIndex.get(it.id) || \"\";\n      return words.every((w) => hay.includes(w));\n    });\n  }, [items, searchQuery, searchIndex]);\n\n  const searching = searchQuery.trim().length > 0;\n\n  const hasActiveFilters = useMemo(\n    () => Object.entries(selectedTerms).some(([k, arr]) => (k !== categoryTax) && (arr || []).length > 0),\n    [selectedTerms, categoryTax]\n  );\n\n  // ---------------- Category chips ----------------\n  const categoryOptionsRaw = termsOptions[categoryTax] || [];\n  const isCatTree = Array.isArray(categoryOptionsRaw[0]?.children);\n  const categoryRoots = isCatTree ? categoryOptionsRaw : categoryOptionsRaw; // we only show roots/flat\n  const currentCategorySel = (selectedTerms[categoryTax] || [])[0] || \"\";\n\n  const setCategory = (id) => {\n    setSelectedTerms((prev) => ({ ...prev, [categoryTax]: id ? [String(id)] : [] }));\n    setPage(1);\n  };\n\n  // ---------------- Mobile filters drawer ----------------\n  const [isFiltersOpen, setIsFiltersOpen] = useState(false);\n  const firstCloseBtnRef = useRef(null);\n  const openFilters = () => setIsFiltersOpen(true);\n  const closeFilters = () => setIsFiltersOpen(false);\n\n  useEffect(() => {\n    if (!isFiltersOpen) return;\n    const prev = document.body.style.overflow;\n    document.body.style.overflow = \"hidden\";\n    const onKey = (e) => { if (e.key === \"Escape\") closeFilters(); };\n    window.addEventListener(\"keydown\", onKey);\n    setTimeout(() => firstCloseBtnRef.current?.focus(), 0);\n    return () => { document.body.style.overflow = prev; window.removeEventListener(\"keydown\", onKey); };\n  }, [isFiltersOpen]);\n\n  const clearAllFilters = () => {\n    setSelectedTerms((prev) => ({ [categoryTax]: prev[categoryTax] || [] })); // keep category; clear others\n    setPage(1);\n  };\n\n  const filterCount =\n    (hasActiveFilters ? Object.values(selectedTerms).reduce((n, arr, k) => n + ((Object.keys(selectedTerms)[k] === categoryTax) ? 0 : (arr || []).length), 0) : 0) +\n    (searching ? 1 : 0);\n\n  // ---------------- Row rendering helpers ----------------\n  const stripTags = (html) => {\n    if (typeof html !== \"string\") return \"\";\n    const tmp = document.createElement(\"div\");\n    tmp.innerHTML = html;\n    return (tmp.textContent || tmp.innerText || \"\").trim();\n  };\n\n  const extractCategoryLabels = (item) => {\n    const labels = [];\n    const seen = new Set();\n    const push = (val) => {\n      const name = typeof val === \"string\" ? val : (val?.name || val?.title || \"\");\n      const text = (name || \"\").toString().trim();\n      if (!text) return;\n      const key = text.toLowerCase();\n      if (seen.has(key)) return;\n      seen.add(key);\n      labels.push(text);\n    };\n    if (Array.isArray(item?.categories)) item.categories.forEach(push);\n    if (item?.taxonomies && typeof item.taxonomies === \"object\") {\n      Object.entries(item.taxonomies).forEach(([tx, arr]) => {\n        if (!Array.isArray(arr)) return;\n        if (/_category$/.test(tx) || /categories?$/.test(tx) || /cat$/.test(tx)) {\n          arr.forEach(push);\n        }\n      });\n    }\n    Object.keys(item || {}).forEach((k) => {\n      if (!/_category$/.test(k) && !/categories?$/.test(k) && !/cat$/.test(k)) return;\n      const v = item[k];\n      if (Array.isArray(v)) v.forEach(push);\n    });\n    return labels;\n  };\n\n  const LeadingIcon = ({ item, categories }) => {\n    // Try to find a matching category with an image\n    const itemCategories = extractCategoryLabels(item);\n\n    let imageUrl = null;\n    let faIcon = null;\n    let color = null;\n\n    // Look for a matching category with image/icon data\n    if (categories && categories.length > 0 && itemCategories.length > 0) {\n      for (const catLabel of itemCategories) {\n        const match = categories.find(\n          (c) => c?.name?.toLowerCase() === catLabel?.toLowerCase() || c?.slug === catLabel?.toLowerCase().replace(/\\s+/g, '-')\n        );\n        if (match) {\n          imageUrl = match.image_url;\n          faIcon = match.fa_icon;\n          color = match.color;\n          break;\n        }\n      }\n    }\n\n    // If we have an image, display it\n    if (imageUrl) {\n      return (\n        <div className=\"w-16 h-16 rounded-xl overflow-hidden shrink-0\">\n          <img\n            src={`/wp-content/uploads/${imageUrl}`}\n            alt=\"\"\n            className=\"w-full h-full object-cover\"\n            loading=\"lazy\"\n          />\n        </div>\n      );\n    }\n\n    // If we have a Font Awesome icon, display it\n    if (faIcon) {\n      return (\n        <div\n          className=\"w-16 h-16 rounded-xl flex items-center justify-center shrink-0\"\n          style={{ backgroundColor: color || 'var(--schemesSecondaryContainer)' }}\n        >\n          <i className={`${faIcon} text-2xl`} style={{ color: color ? '#fff' : 'var(--schemesOnSecondaryContainer)' }} />\n        </div>\n      );\n    }\n\n    // Fallback to letter\n    const letter = (String(item?.title || \"\").trim()[0] || \"\").toUpperCase();\n    return (\n      <div className=\"w-16 h-16 rounded-xl bg-schemesSecondaryContainer flex items-center justify-center shrink-0\">\n        <span className=\"Blueprint-headline-medium text-schemesOnSecondaryContainer\">\n          {letter}\n        </span>\n      </div>\n    );\n  };\n\n  const MessageRow = ({ item }) => {\n    const href = `${item?.permalink}` || \"#\";\n    const itemCategories = extractCategoryLabels(item);\n\n    return (\n      <a\n        href={href}\n        className=\"block rounded-xl border border-[var(--schemesOutlineVariant)] bg-[var(--schemesSurfaceContainerLowest)] hover:bg-[var(--schemesSurfaceContainer)] focus:outline-none focus:ring-2 focus:ring-[var(--schemesPrimary)] transition\"\n      >\n        <div className=\"flex gap-4 p-4\">\n          <LeadingIcon item={item} categories={categories} />\n          <div className=\"flex-1\">\n            {itemCategories.length > 0 && (\n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                {itemCategories.map((label, idx) => {\n                  const color = getCategoryColor(label);\n                  return (\n                    <span\n                      key={`${item.id}-cat-${idx}`}\n                      className={`px-3 py-1.5 rounded-lg ${color.bg} ${color.text} Blueprint-label-small`}\n                    >\n                      {label}\n                    </span>\n                  );\n                })}\n              </div>\n            )}\n\n            <div className=\"Blueprint-title-small-emphasized text-[var(--schemesOnSurface)] mb-1\">\n              {item?.title}\n            </div>\n\n            {item?.excerpt && (\n              <p\n                className=\"Blueprint-body-small text-[var(--schemesOnSurfaceVariant)]\"\n                style={{ display: \"-webkit-box\", WebkitLineClamp: 2, WebkitBoxOrient: \"vertical\", overflow: \"hidden\" }}\n              >\n                {stripTags(item.excerpt)}\n              </p>\n            )}\n          </div>\n        </div>\n      </a>\n    );\n  };\n\n  // ---------------- Skeletons ----------------\n  const skeletonRows = Array.from({ length: 8 }).map((_, i) => (\n    <div key={`sk-${i}`} className=\"rounded-xl border border-[var(--schemesOutlineVariant)] overflow-hidden bg-[var(--schemesSurface)]\">\n      <div className=\"flex gap-4 p-4\">\n        <div className=\"w-16 h-16 rounded-xl bg-[var(--schemesSurfaceContainerHighest)] animate-pulse\" />\n        <div className=\"flex-1 space-y-2\">\n          <div className=\"h-5 w-3/5 bg-[var(--schemesSurfaceContainerHigh)] animate-pulse rounded\" />\n          <div className=\"h-4 w-4/5 bg-[var(--schemesSurfaceContainerHigh)] animate-pulse rounded\" />\n          <div className=\"h-4 w-2/3 bg-[var(--schemesSurfaceContainerHigh)] animate-pulse rounded\" />\n        </div>\n      </div>\n    </div>\n  ));\n\n  return (\n    <div className=\"archive-container bg-schemesSurface\">\n      {/* Header band */}\n      <div className=\"bg-schemesPrimaryFixed py-8\">\n        <div className=\"tsb-container\">\n          <Breadcrumbs items={breadcrumbs} textColour=\"text-schemesPrimary\" />\n          <h1 className=\"Blueprint-headline-large text-schemesOnSurface mb-1\">{title}</h1>\n          {subtitle && (\n            <p className=\"Blueprint-body-medium text-schemesOnPrimaryFixedVariant\">{subtitle}</p>\n          )}\n        </div>\n      </div>\n\n      {/* Top controls: category chips + mobile search & filters */}\n      <div className=\"tsb-container pt-6\">\n        {/* Mobile search + Filters button */}\n        <div className=\"lg:hidden flex items-center gap-2 mb-4\">\n          <div className=\"relative flex-1\">\n            <input\n              id=\"archive-search-mobile\"\n              type=\"search\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search by keyword\"\n              className=\"Blueprint-body-medium w-full pl-4 pr-10 py-3 rounded-3xl bg-schemesSurfaceContainerHigh focus:outline-none focus:ring-2 focus:ring-[var(--schemesPrimary)]\"\n            />\n            <MagnifyingGlassIcon size={20} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-schemesOnSurfaceVariant\" weight=\"bold\" aria-hidden />\n          </div>\n\n          <Button\n            onClick={() => setIsFiltersOpen(true)}\n            icon={<FunnelSimpleIcon />}\n            label={filterCount ? `Filters (${filterCount})` : \"Filters\"}\n            variant=\"outlined\"\n            size=\"base\"\n            aria-expanded={isFiltersOpen ? \"true\" : \"false\"}\n            aria-controls=\"mobile-filters\"\n          />\n        </div>\n      </div>\n\n      <div className=\"tsb-container flex flex-col lg:flex-row py-4 lg:py-8 gap-8\">\n        {/* Filters (desktop) */}\n        {displayedFilters.length > 0 && (\n          <aside className=\"hidden lg:block lg:w-64 xl:w-72\">\n            <div className=\"mb-6\">\n              <label htmlFor=\"archive-search\" className=\"sr-only\">Search by keyword</label>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"bg-schemesSurfaceContainer flex-1 flex items-center gap-2 rounded-full px-4 py-3\">\n                  <input\n                    id=\"archive-search\"\n                    type=\"search\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    placeholder=\"Search by keyword\"\n                    className=\"w-full outline-none Blueprint-body-medium text-schemesOnSurface placeholder:text-schemesOnSurfaceVariant\"\n                  />\n                  {!searchQuery && (\n                    <MagnifyingGlassIcon size={20} className=\"text-schemesOnSurfaceVariant\" weight=\"bold\" />\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <h2 className=\"Blueprint-headline-small-emphasized mb-4 text-schemesOnSurfaceVariant\">Filters</h2>\n\n            {(hasActiveFilters || searchQuery) && (\n              <div className=\"mb-4 flex gap-2\">\n                {hasActiveFilters && (\n                  <Button size=\"sm\" variant=\"tonal\" onClick={clearAllFilters} label=\"Clear filters\" />\n                )}\n                {searchQuery && (\n                  <Button size=\"sm\" variant=\"tonal\" onClick={() => setSearchQuery(\"\")} label=\"Clear search\" />\n                )}\n              </div>\n            )}\n\n            {displayedFilters.map((f) => (\n              <div key={f.taxonomy} className=\"mb-4\">\n                <FilterGroup\n                  title={f.label || f.taxonomy}\n                  options={termsOptions[f.taxonomy] || []}\n                  selected={selectedTerms[f.taxonomy] || []}\n                  onChangeHandler={(e) => {\n                    const id = String(e.target.value);\n                    const checked = !!(e.target.checked);\n                    setSelectedTerms((prev) => {\n                      const current = prev[f.taxonomy] || [];\n                      const next = checked ? [...current, id] : current.filter((x) => x !== id);\n                      return { ...prev, [f.taxonomy]: next };\n                    });\n                    setPage(1);\n                  }}\n                />\n              </div>\n            ))}\n          </aside>\n        )}\n\n        {/* Main content */}\n        <section className=\"flex-1\">\n          {categoryTax && (categoryRoots?.length > 0) && (\n            <div className=\"flex items-center gap-2 overflow-x-auto pb-3 mb-3\">\n              <button\n                type=\"button\"\n                onClick={() => setCategory(\"\")}\n                className={`px-3 py-2 rounded-full whitespace-nowrap transition-colors ${!currentCategorySel\n                  ? \"bg-gray-700 text-white\"\n                  : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\n                  } Blueprint-label-small`}\n              >\n                All\n              </button>\n              {categoryRoots.map((opt) => {\n                const isSelected = String(currentCategorySel) === String(opt.id);\n                const color = getCategoryColor(opt.name, isSelected);\n                return (\n                  <button\n                    key={opt.id}\n                    type=\"button\"\n                    onClick={() => setCategory(opt.id)}\n                    className={`px-3 py-2 rounded-full whitespace-nowrap transition-colors ${color.bg} ${color.text} ${!isSelected ? \"hover:opacity-80\" : \"\"\n                      } Blueprint-label-small`}\n                    title={opt.name}\n                  >\n                    {opt.name}\n                  </button>\n                );\n              })}\n            </div>\n          )}\n          {/* Error */}\n          {error && !loading && (\n            <div className=\"mb-8 rounded-xl border border-[var(--schemesOutlineVariant)] bg-[var(--schemesSurface)] p-6\">\n              <div className=\"Blueprint-title-small-emphasized mb-2 text-[var(--schemesError)]\">Something went wrong</div>\n              <p className=\"Blueprint-body-medium text-[var(--schemesOnSurfaceVariant)] mb-4\">{error}</p>\n              <div className=\"flex gap-2\">\n                <Button variant=\"filled\" label=\"Try again\" onClick={() => setRetryTick((n) => n + 1)} />\n                {hasActiveFilters && <Button variant=\"tonal\" label=\"Clear filters\" onClick={clearAllFilters} />}\n              </div>\n            </div>\n          )}\n\n          {/* Loading */}\n          {loading && (\n            <div className=\"space-y-4 mb-8\" aria-hidden=\"true\">\n              {skeletonRows}\n            </div>\n          )}\n\n          {/* Empty */}\n          {!loading && !error && filteredItems.length === 0 && (\n            <div className=\"rounded-2xl border border-[var(--schemesOutlineVariant)] bg-[var(--schemesSurface)] p-10 text-center mb-8\">\n              <div className=\"Blueprint-headline-small mb-2\">No results found</div>\n              <p className=\"Blueprint-body-medium text-[var(--schemesOnSurfaceVariant)] mb-6\">\n                {searchQuery ? \"Try a different keyword or clear search.\" : \"Try adjusting or clearing your filters to see more results.\"}\n              </p>\n              <div className=\"flex justify-center gap-3\">\n                {searchQuery\n                  ? <Button variant=\"filled\" label=\"Clear search\" onClick={() => setSearchQuery(\"\")} />\n                  : <Button variant=\"filled\" label=\"Clear all filters\" onClick={clearAllFilters} />\n                }\n                <Button variant=\"tonal\" label=\"Reload\" onClick={() => setRetryTick((n) => n + 1)} />\n              </div>\n            </div>\n          )}\n\n          {/* Results */}\n          {!loading && !error && filteredItems.length > 0 && (\n            <>\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"Blueprint-body-small md:Blueprint-body-medium lg:Blueprint-body-large text-[var(--schemesOnSurfaceVariant)]\" aria-live=\"polite\">\n                  {searchQuery\n                    ? `${filteredItems.length} match${filteredItems.length === 1 ? \"\" : \"s\"} on this page`\n                    : (typeof total === \"number\" ? `${total.toLocaleString()} result${total === 1 ? \"\" : \"s\"}` : null)}\n                </div>\n              </div>\n\n              <div className=\"space-y-4 mb-8\">\n                {filteredItems.map((item) => (\n                  <MessageRow key={item.id} item={item} />\n                ))}\n              </div>\n            </>\n          )}\n\n          {/* Pagination */}\n          {!loading && !error && totalPages > 1 && !searching && (\n            <div className=\"flex justify-center items-center gap-3 mt-2\">\n              <Button\n                size=\"base\"\n                variant=\"tonal\"\n                disabled={page <= 1}\n                onClick={() => setPage((p) => Math.max(1, p - 1))}\n                label=\"Prev\"\n              />\n              <span className=\"Blueprint-body-medium text-schemesOnSurfaceVariant\">\n                {page} / {totalPages}\n              </span>\n              <Button\n                size=\"base\"\n                variant=\"tonal\"\n                disabled={page >= totalPages}\n                onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\n                label=\"Next\"\n              />\n            </div>\n          )}\n        </section>\n      </div>\n\n      {/* MOBILE FILTERS DRAWER */}\n      <div\n        id=\"mobile-filters\"\n        className={`lg:hidden fixed inset-0 z-[70] ${isFiltersOpen ? \"\" : \"pointer-events-none\"}`}\n        aria-hidden={isFiltersOpen ? \"false\" : \"true\"}\n      >\n        {/* Overlay */}\n        <div\n          onClick={closeFilters}\n          className={`absolute inset-0 transition-opacity ${isFiltersOpen ? \"opacity-100\" : \"opacity-0\"} bg-[color:rgb(0_0_0_/_0.44)]`}\n        />\n        {/* Sheet */}\n        <div\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-label=\"Filters\"\n          className={`absolute left-0 right-0 bottom-0 max-h-[85vh] rounded-t-2xl bg-schemesSurface shadow-[0_-16px_48px_rgba(0,0,0,0.25)] transition-transform duration-300 ${isFiltersOpen ? \"translate-y-0\" : \"translate-y-full\"}`}\n        >\n          <div className=\"relative px-4 py-3 border-b border-[var(--schemesOutlineVariant)]\">\n            <div className=\"mx-auto h-1.5 w-12 rounded-full bg-[var(--schemesOutlineVariant)]\" />\n            <div className=\"mt-3 flex items-center justify-between\">\n              <div className=\"Blueprint-title-small-emphasized\">Filters</div>\n              <button\n                ref={firstCloseBtnRef}\n                type=\"button\"\n                onClick={closeFilters}\n                className=\"rounded-full p-2 hover:bg-surfaceContainerHigh text-schemesOnSurfaceVariant\"\n                aria-label=\"Close filters\"\n              >\n                <XIcon />\n              </button>\n            </div>\n          </div>\n\n          <div className=\"px-4 py-4 overflow-y-auto space-y-4\">\n            <div className=\"relative\">\n              <input\n                type=\"search\"\n                placeholder=\"Search by keyword\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"Blueprint-body-medium w-full pl-4 pr-10 py-3 rounded-3xl bg-schemesSurfaceContainerHigh focus:outline-none focus:ring-2 focus:ring-[var(--schemesPrimary)]\"\n              />\n              <MagnifyingGlassIcon size={20} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-schemesOnSurfaceVariant\" weight=\"bold\" aria-hidden />\n            </div>\n\n            {displayedFilters.map((f) => (\n              <FilterGroup\n                key={`m-${f.taxonomy}`}\n                title={f.label || f.taxonomy}\n                options={termsOptions[f.taxonomy] || []}\n                selected={selectedTerms[f.taxonomy] || []}\n                onChangeHandler={(e) => {\n                  const id = String(e.target.value);\n                  const checked = !!(e.target.checked);\n                  setSelectedTerms((prev) => {\n                    const current = prev[f.taxonomy] || [];\n                    const next = checked ? [...current, id] : current.filter((x) => x !== id);\n                    return { ...prev, [f.taxonomy]: next };\n                  });\n                  setPage(1);\n                }}\n              />\n            ))}\n          </div>\n\n          <div className=\"sticky bottom-0 px-4 py-3 bg-schemesSurface border-t border-[var(--schemesOutlineVariant)] flex gap-2\">\n            <Button onClick={clearAllFilters} variant=\"outlined\" label=\"Clear all\" className=\"flex-1\" />\n            <Button onClick={closeFilters} variant=\"filled\" label=\"Apply\" className=\"flex-1\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","export function StyledCheckbox({ id, label, onChangeHandler, checked }) {\n  return (\n    <div key={id}>\n      <input\n        type=\"checkbox\"\n        id={`filter-${id}`}\n        value={id}\n        checked={checked} //  controlled by parent\n        className=\"peer hidden\"\n        onChange={onChangeHandler}\n      />\n      <label\n        htmlFor={`filter-${id}`}\n        className=\"cursor-pointer px-3 py-2 rounded-md Blueprint-label-small\n                  transition-colors duration-200\n                  peer-checked:bg-gray-500 peer-checked:text-white peer-checked:border-grey-700\n                  peer-not-checked:bg-[var(--schemesSurfaceContainer)] peer-not-checked:text-gray-700 peer-not-checked:border-gray-300\"\n      >\n        {label}\n      </label>\n    </div>\n  )\n}"],"names":["React","jsx","_jsx","jsxs","_jsxs","Breadcrumbs","items","textColour","length","filteredItems","map","it","url","includes","replace","className","children","i","Fragment","href","label","clsx","Button","size","variant","shape","icon","disabled","onClick","type","sizeStyles","xs","sm","base","lg","xl","rounded","square","pill","variantStyles","filled","tonal","outline","elevated","text","disabledStyles","baseCursor","useMemo","StyledCheckbox","CaretRight","FilterGroup","title","options","selected","onChangeHandler","expanded","onToggleExpand","onShowLess","initialShowCount","isNested","Array","isArray","some","o","parents","totalCount","hasMore","displayCount","isChecked","id","String","collectDescendantIds","node","bag","forEach","c","push","anyChildSelected","kids","fireChange","checked","target","value","onParentChange","onChildChange","parentNode","childNode","ChildRow","isLast","depth","show","hasKids","style","marginLeft","weight","name","e","g","idx","renderParent","hasChildren","child","slice","option","useEffect","useState","useRef","MagnifyingGlassIcon","FunnelSimpleIcon","XIcon","_Fragment","getCategoryColor","isSelected","colors","bg","selectedBg","hash","charCodeAt","index","Math","abs","color","MessageBoardArchivePage","props","postType","taxonomy","currentTerm","filters","endpoint","baseQuery","subtitle","breadcrumbs","categories","CPT","page","setPage","getInitialCategoryFromURL","window","params","URLSearchParams","location","search","get","selectedTerms","setSelectedTerms","urlInitializedRef","initialCategorySlug","setItems","totalPages","setTotalPages","total","setTotal","undefined","loading","setLoading","error","setError","searchQuery","setSearchQuery","termsOptions","setTermsOptions","descendantsMap","setDescendantsMap","retryTick","setRetryTick","categoryFilter","re","find","f","isCategory","test","categoryTax","displayedFilters","filter","buildTreeAndDescendants","rows","byId","r","_r$parent","slug","parent","roots","p","descendants","collect","n","acc","sortTree","nodes","sort","a","b","localeCompare","tree","fetchedOnceRef","Set","toFetch","unshift","cancelled","nextOptions","nextDesc","tax","current","has","res","fetch","encodeURIComponent","headers","Accept","ok","Error","status","json","t","_t$parent","isHier","add","Object","keys","prev","didScopeRef","opts","isTree","stack","pop","findBySlug","item","found","matchedTerm","fetchSeq","seq","payload","baseTax","uiTax","taxKey","termIds","entries","field","terms","parseInt","Number","isFinite","operator","include_children","finalTax","tax_relation","method","body","JSON","stringify","total_pages","err","message","searchIndex","Map","val","v","values","excerpt","tags","taxonomies","set","join","toLowerCase","q","trim","words","split","Boolean","hay","every","w","searching","hasActiveFilters","k","arr","categoryOptionsRaw","isCatTree","categoryRoots","currentCategorySel","setCategory","isFiltersOpen","setIsFiltersOpen","firstCloseBtnRef","openFilters","closeFilters","document","overflow","onKey","key","addEventListener","setTimeout","focus","removeEventListener","clearAllFilters","filterCount","reduce","stripTags","html","tmp","createElement","innerHTML","textContent","innerText","extractCategoryLabels","labels","seen","toString","tx","LeadingIcon","itemCategories","imageUrl","faIcon","catLabel","match","image_url","fa_icon","src","alt","backgroundColor","letter","toUpperCase","MessageRow","permalink","display","WebkitLineClamp","WebkitBoxOrient","skeletonRows","from","_","onChange","placeholder","htmlFor","next","x","opt","toLocaleString","max","min","role","ref"],"sourceRoot":""}