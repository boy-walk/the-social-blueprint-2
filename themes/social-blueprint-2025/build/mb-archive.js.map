{"version":3,"file":"mb-archive.js?ver=9eb0d856e2426b1d4e28","mappings":"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","sources":["webpack://brads-boilerplate-theme/./src/scripts/Breadcrumbs.js","webpack://brads-boilerplate-theme/./src/scripts/Button.js","webpack://brads-boilerplate-theme/./src/scripts/FilterGroup.js","webpack://brads-boilerplate-theme/./src/scripts/MessageBoardArchivePage.js","webpack://brads-boilerplate-theme/./src/scripts/StyledCheckbox.js"],"sourcesContent":["// components/Breadcrumbs.jsx\nimport React from \"react\";\n\nexport function Breadcrumbs({ items = [], textColour = 'text-schemesOnSurfaceVariant' }) {\n  if (!items || !items.length) return null;\n\n  const filteredItems = items.map((it) => {\n    if (it.url.includes('events-calendar')) {\n      return { ...it, url: it.url.replace('events-calendar', 'events') };\n    }\n    return it;\n  })\n\n  return (\n    <nav aria-label=\"Breadcrumb\" className=\"mb-3 lg:mb-6\">\n      <ol className={`flex flex-wrap items-center gap-1 Blueprint-label-small lg:Blueprint-label-large ${textColour}`}>\n        {filteredItems.map((it, i) => (\n          <React.Fragment key={i}>\n            {i > 0 && <li className=\"px-1\">\n              {'>'}\n            </li>}\n            <li>\n              {it.url ? (\n                <a href={it.url} className=\"no-underline hover:underline \">{it.label}</a>\n              ) : (\n                <span>{it.label}</span>\n              )}\n            </li>\n          </React.Fragment>\n        ))}\n      </ol>\n    </nav>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\n\nexport function Button({\n  className = '',\n  label = 'Label',\n  size = 'base',\n  variant = 'filled',\n  shape = 'square',\n  icon,\n  disabled = false,\n  onClick = () => { },\n  type = 'button',\n}) {\n  const sizeStyles = {\n    xs: 'px-3 py-1.5 Blueprint-label-small md:Blueprint-label-medium lg:Blueprint-label-large',\n    sm: 'px-4 py-2 Blueprint-label-small md:Blueprint-label-medium lg:Blueprint-label-large',\n    base: 'px-4 py-2.5 Blueprint-title-small md:Blueprint-title-medium lg:Blueprint-title-large',\n    lg: 'px-4 py-4 Blueprint-headline-small md:Blueprint-headline-medium lg:Blueprint-headline-large',\n    xl: 'px-8 py-6 Blueprint-headline-small md:Blueprint-headline-medium lg:Blueprint-headline-large',\n  }[size];\n\n  const rounded = {\n    square: { xs: 'rounded-xl', sm: 'rounded-xl', base: 'rounded-[16px]', lg: 'rounded-[16px]', xl: 'rounded-[28px]' },\n    pill: { xs: 'rounded-[100px]', sm: 'rounded-[100px]', base: 'rounded-[100px]', lg: 'rounded-[100px]', xl: 'rounded-[100px]' },\n  };\n\n  const variantStyles = {\n    filled: 'bg-[var(--schemesPrimary)] text-[var(--schemesOnPrimary)] hover:bg-[var(--palettesPrimary40)]',\n    tonal: 'bg-[var(--schemesPrimaryFixed)] text-[var(--schemesOnPrimaryFixedVariant)] hover:bg-[var(--schemesPrimaryFixedDim)]',\n    outline: 'border border-[var(--schemesOnPrimary)] text-[var(--schemesOnPrimary)] hover:bg-[var(--palettesOnPrimary40)]',\n    elevated: 'bg-[var(--schemesSurfaceContainerHigh)] text-[var(--schemesPrimary)] shadow-3x3 hover:bg-[var(--stateLayersSurfaceContainerHighOpacity08)]',\n    text: 'bg-transparent text-[var(--schemesPrimary)] hover:bg-[var(--palettesPrimary60)]',\n  }[variant];\n\n  // cursor + disabled handling\n  const disabledStyles = disabled ? 'opacity-50 cursor-not-allowed pointer-events-none' : '';\n  const baseCursor = disabled ? '' : 'cursor-pointer';\n\n  return (\n    <button\n      type={type}\n      onClick={onClick}\n      disabled={disabled}\n      aria-disabled={disabled}\n      className={clsx(\n        'inline-flex items-center justify-center gap-2 transition-colors duration-150',\n        baseCursor,            // pointer on hover for enabled buttons\n        sizeStyles,\n        rounded[shape][size],\n        variantStyles,\n        disabledStyles,        // overrides cursor when disabled\n        className\n      )}\n    >\n      {icon && <span className=\"shrink-0\">{icon}</span>}\n      <span className=\"Blueprint-label-large\">{label}</span>\n    </button>\n  );\n}\n","import { useMemo } from \"react\";\nimport { StyledCheckbox } from \"./StyledCheckbox\";\nimport { CaretRight } from \"@phosphor-icons/react\";\n\nexport function FilterGroup({ title, options, selected, onChangeHandler, expanded = false, onToggleExpand, onShowLess, initialShowCount = 8 }) {\n  const isNested = useMemo(\n    () => Array.isArray(options) && options.some(o => Array.isArray(o.children) && o.children.length > 0),\n    [options]\n  );\n\n  const parents = useMemo(() => (isNested ? options : options), [isNested, options]);\n\n  const totalCount = isNested ? parents.length : options.length;\n  const hasMore = totalCount > initialShowCount;\n  const displayCount = expanded ? totalCount : initialShowCount;\n\n  const isChecked = (id) => selected.includes(String(id));\n\n  const collectDescendantIds = (node, bag = []) => {\n    (node.children || []).forEach((c) => {\n      bag.push(String(c.id));\n      collectDescendantIds(c, bag);\n    });\n    return bag;\n  };\n\n  const anyChildSelected = (node) => {\n    const kids = collectDescendantIds(node, []);\n    return kids.some((id) => isChecked(id));\n  };\n\n  const fireChange = (id, checked) => {\n    onChangeHandler({ target: { value: String(id), checked: !!checked } });\n  };\n\n  const onParentChange = (node, checked) => {\n    if (checked) {\n      fireChange(node.id, true);\n      return;\n    }\n    fireChange(node.id, false);\n    const kids = collectDescendantIds(node, []);\n    kids.forEach((id) => {\n      if (isChecked(id)) fireChange(id, false);\n    });\n  };\n\n  const onChildChange = (parentNode, childNode, checked) => {\n    fireChange(childNode.id, checked);\n    if (checked && isChecked(parentNode.id)) {\n      fireChange(parentNode.id, false);\n    }\n  };\n\n  // one row of a child with connector lines\n  const ChildRow = ({ parentNode, childNode, isLast, depth = 0 }) => {\n    const show = isChecked(parentNode.id) || anyChildSelected(parentNode);\n    if (!show) return null;\n\n    const hasKids = Array.isArray(childNode.children) && childNode.children.length > 0;\n    const checked = isChecked(childNode.id);\n    const expanded = checked || (hasKids && anyChildSelected(childNode));\n\n    return (\n      <div key={`c-${childNode.id}`} className=\"w-full\">\n        <div\n          className=\"flex items-center gap-1\"\n          style={{ marginLeft: depth * 16 }}\n        >\n          {hasKids && (\n            <CaretRight\n              size={16}\n              weight=\"bold\"\n              className={`text-schemesOnSurfaceVariant transition-transform flex-shrink-0 ${expanded ? 'rotate-90' : ''}`}\n            />\n          )}\n          <div className=\"flex-1 min-w-0\">\n            <StyledCheckbox\n              id={childNode.id}\n              label={childNode.name}\n              checked={checked}\n              onChangeHandler={(e) => onChildChange(parentNode, childNode, e.target.checked)}\n            />\n          </div>\n        </div>\n        {hasKids && expanded && (\n          <div className=\"mt-4 mb-2 space-y-4\">\n            {childNode.children.map((g, idx) => (\n              <ChildRow\n                key={`c-${childNode.id}-${g.id}`}\n                parentNode={parentNode}\n                childNode={g}\n                isLast={idx === childNode.children.length - 1}\n                depth={depth + 1}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderParent = (node) => {\n    const checked = isChecked(node.id);\n    const expanded = checked || anyChildSelected(node);\n    const hasChildren = Array.isArray(node.children) && node.children.length > 0;\n\n    return (\n      <div key={`p-${node.id}`} className=\"w-full\">\n        <div className=\"flex items-center gap-1 my-1\">\n          {hasChildren && (\n            <CaretRight\n              size={16}\n              weight=\"bold\"\n              className={`text-schemesOnSurfaceVariant transition-transform flex-shrink-0 ${expanded ? 'rotate-90' : ''}`}\n            />\n          )}\n          <div className=\"flex-1 min-w-0\">\n            <StyledCheckbox\n              id={node.id}\n              label={node.name}\n              checked={checked}\n              onChangeHandler={(e) => onParentChange(node, e.target.checked)}\n            />\n          </div>\n        </div>\n\n        {hasChildren && expanded && (\n          <div className=\"relative mt-4 mb-2\">\n            <div className=\"pl-6 space-y-4\">\n              {node.children.map((child, idx) => (\n                <ChildRow\n                  key={`c-${child.id}`}\n                  parentNode={node}\n                  childNode={child}\n                  isLast={idx === node.children.length - 1}\n                  depth={0}\n                />\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // FLAT\n  if (!isNested) {\n    return (\n      <div className=\"mb-4\">\n        {title && <h3 className=\"Blueprint-title-small-emphasized text-schemesOnSurfaceVariant mb-3\">{title}</h3>}\n        <div className=\"flex flex-wrap gap-4\">\n          {options.slice(0, displayCount).map((option) => (\n            <StyledCheckbox\n              key={option.id}\n              id={option.id}\n              label={option.name}\n              checked={selected.includes(String(option.id))}\n              onChangeHandler={onChangeHandler}\n            />\n          ))}\n        </div>\n\n        {hasMore && !expanded && onToggleExpand && (\n          <button\n            type=\"button\"\n            onClick={onToggleExpand}\n            className=\"mt-2 text-sm text-schemesPrimary hover:underline Blueprint-label-large\"\n          >\n            Show all ({totalCount})\n          </button>\n        )}\n        {hasMore && expanded && onToggleExpand && (\n          <button\n            type=\"button\"\n            onClick={onShowLess}\n            className=\"mt-2 text-sm text-schemesPrimary hover:underline Blueprint-label-large\"\n          >\n            Show less\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  // NESTED\n  return (\n    <div className=\"mb-4\">\n      {title && <h3 className=\"Blueprint-title-small-emphasized text-schemesOnSurfaceVariant mb-3\">{title}</h3>}\n\n      <div className=\"flex flex-col gap-2\">\n        {(parents || []).slice(0, displayCount).map(renderParent)}\n      </div>\n\n      {hasMore && !expanded && onToggleExpand && (\n        <button\n          type=\"button\"\n          onClick={onToggleExpand}\n          className=\"mt-2 text-sm text-schemesPrimary hover:underline Blueprint-label-large\"\n        >\n          Show all ({totalCount})\n        </button>\n      )}\n    </div>\n  );\n}","import React, { useEffect, useMemo, useState, useRef, useCallback } from \"react\";\nimport { FilterGroup } from \"./FilterGroup\";\nimport { Button } from \"./Button\";\nimport { MagnifyingGlass, FunnelSimple, X } from \"@phosphor-icons/react\";\nimport { Breadcrumbs } from \"./Breadcrumbs\";\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Constants & Helpers (outside component to avoid recreation)\n// ─────────────────────────────────────────────────────────────────────────────\n\nconst CATEGORY_COLORS = [\n  { bg: \"bg-blue-100\", text: \"text-blue-800\", selectedBg: \"bg-blue-600\" },\n  { bg: \"bg-emerald-100\", text: \"text-emerald-800\", selectedBg: \"bg-emerald-600\" },\n  { bg: \"bg-amber-100\", text: \"text-amber-800\", selectedBg: \"bg-amber-600\" },\n  { bg: \"bg-rose-100\", text: \"text-rose-800\", selectedBg: \"bg-rose-600\" },\n  { bg: \"bg-violet-100\", text: \"text-violet-800\", selectedBg: \"bg-violet-600\" },\n  { bg: \"bg-cyan-100\", text: \"text-cyan-800\", selectedBg: \"bg-cyan-600\" },\n  { bg: \"bg-orange-100\", text: \"text-orange-800\", selectedBg: \"bg-orange-600\" },\n  { bg: \"bg-pink-100\", text: \"text-pink-800\", selectedBg: \"bg-pink-600\" },\n  { bg: \"bg-teal-100\", text: \"text-teal-800\", selectedBg: \"bg-teal-600\" },\n  { bg: \"bg-indigo-100\", text: \"text-indigo-800\", selectedBg: \"bg-indigo-600\" },\n  { bg: \"bg-lime-100\", text: \"text-lime-800\", selectedBg: \"bg-lime-600\" },\n  { bg: \"bg-fuchsia-100\", text: \"text-fuchsia-800\", selectedBg: \"bg-fuchsia-600\" },\n];\n\nconst hashString = (str) => {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  return Math.abs(hash);\n};\n\nconst getCategoryColor = (label, isSelected = false) => {\n  const color = CATEGORY_COLORS[hashString(label) % CATEGORY_COLORS.length];\n  return isSelected\n    ? { bg: color.selectedBg, text: \"text-white\" }\n    : { bg: color.bg, text: color.text };\n};\n\nconst stripTags = (html) => {\n  if (typeof html !== \"string\") return \"\";\n  const tmp = document.createElement(\"div\");\n  tmp.innerHTML = html;\n  return (tmp.textContent || tmp.innerText || \"\").trim();\n};\n\nconst CATEGORY_PATTERN = /(_category|_categories|category|categories|cat)$/i;\n\nconst extractCategoryLabels = (item) => {\n  const seen = new Set();\n  const labels = [];\n\n  const push = (val) => {\n    const name = typeof val === \"string\" ? val : val?.name || val?.title || \"\";\n    const text = name.toString().trim();\n    if (!text) return;\n    const key = text.toLowerCase();\n    if (seen.has(key)) return;\n    seen.add(key);\n    labels.push(text);\n  };\n\n  // Check categories array\n  item?.categories?.forEach(push);\n\n  // Check taxonomies object\n  if (item?.taxonomies) {\n    for (const [tx, arr] of Object.entries(item.taxonomies)) {\n      if (Array.isArray(arr) && CATEGORY_PATTERN.test(tx)) {\n        arr.forEach(push);\n      }\n    }\n  }\n\n  // Check direct category properties\n  for (const k of Object.keys(item || {})) {\n    if (CATEGORY_PATTERN.test(k)) {\n      const v = item[k];\n      if (Array.isArray(v)) v.forEach(push);\n    }\n  }\n\n  return labels;\n};\n\nconst buildTreeAndDescendants = (rows) => {\n  const byId = {};\n  rows.forEach((r) => {\n    const id = String(r.id);\n    byId[id] = {\n      id,\n      name: r.name,\n      slug: r.slug,\n      parent: String(r.parent ?? 0),\n      children: []\n    };\n  });\n\n  const roots = [];\n  rows.forEach((r) => {\n    const id = String(r.id);\n    const p = byId[id].parent;\n    if (p !== \"0\" && byId[p]) {\n      byId[p].children.push(byId[id]);\n    } else {\n      roots.push(byId[id]);\n    }\n  });\n\n  const descendants = {};\n  const collect = (n) => {\n    const acc = [];\n    n.children.forEach((c) => {\n      acc.push(String(c.id), ...collect(c));\n    });\n    descendants[String(n.id)] = acc;\n    return acc;\n  };\n  roots.forEach(collect);\n\n  const sortTree = (nodes) => {\n    nodes.sort((a, b) => a.name.localeCompare(b.name));\n    nodes.forEach((n) => sortTree(n.children));\n  };\n  sortTree(roots);\n\n  return { tree: roots, descendants };\n};\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Sub-components (memoized)\n// ─────────────────────────────────────────────────────────────────────────────\n\nconst LeadingIcon = React.memo(({ categoryLabels, categoriesMap }) => {\n  let imageUrl = null;\n  let faIcon = null;\n  let color = null;\n\n  // Find matching category\n  for (const label of categoryLabels) {\n    const match = categoriesMap.get(label.toLowerCase());\n    if (match) {\n      imageUrl = match.image_url;\n      faIcon = match.fa_icon;\n      color = match.color;\n      break;\n    }\n  }\n\n  if (imageUrl) {\n    return (\n      <div className=\"w-16 h-20 md:w-20 md:h-24 rounded-xl overflow-hidden shrink-0\">\n        <img\n          src={imageUrl.startsWith('http') ? imageUrl : `/wp-content/uploads/${imageUrl}`}\n          alt=\"\"\n          className=\"w-full h-full object-cover\"\n          loading=\"lazy\"\n        />\n      </div>\n    );\n  }\n\n  if (faIcon) {\n    return (\n      <div\n        className=\"w-14 h-14 md:w-16 md:h-16 rounded-xl flex items-center justify-center shrink-0\"\n        style={{ backgroundColor: color || 'var(--schemesSecondaryContainer)' }}\n      >\n        <i\n          className={`${faIcon} text-xl md:text-2xl`}\n          style={{ color: color ? '#fff' : 'var(--schemesOnSecondaryContainer)' }}\n        />\n      </div>\n    );\n  }\n\n  // Fallback to first letter\n  const letter = (categoryLabels[0]?.[0] || \"•\").toUpperCase();\n  return (\n    <div className=\"w-14 h-14 md:w-16 md:h-16 rounded-xl bg-schemesSecondaryContainer flex items-center justify-center shrink-0\">\n      <span className=\"Blueprint-title-large md:Blueprint-headline-medium text-schemesOnSecondaryContainer\">\n        {letter}\n      </span>\n    </div>\n  );\n});\n\nconst CategoryBadges = React.memo(({ labels }) => {\n  if (!labels.length) return null;\n\n  return (\n    <div className=\"flex flex-wrap gap-1.5 md:gap-2 mb-1.5 md:mb-2\">\n      {labels.map((label, idx) => {\n        const color = getCategoryColor(label);\n        return (\n          <span\n            key={idx}\n            className={`px-2 py-1 md:px-3 md:py-1.5 rounded-lg ${color.bg} ${color.text} Blueprint-label-small`}\n          >\n            {label}\n          </span>\n        );\n      })}\n    </div>\n  );\n});\n\nconst MessageRow = React.memo(({ item, categoriesMap }) => {\n  const categoryLabels = useMemo(() => extractCategoryLabels(item), [item]);\n  const href = item?.permalink || \"#\";\n  const excerpt = useMemo(() => stripTags(item?.excerpt || \"\"), [item?.excerpt]);\n\n  return (\n    <a\n      href={href}\n      className=\"block rounded-xl border border-schemesOutlineVariant bg-schemesSurfaceContainerLowest hover:bg-schemesSurfaceContainer focus:outline-none focus:ring-2 focus:ring-schemesPrimary transition\"\n    >\n      <div className=\"flex gap-3 md:gap-4 p-3 md:p-4\">\n        <LeadingIcon categoryLabels={categoryLabels} categoriesMap={categoriesMap} />\n        <div className=\"flex-1 min-w-0\">\n          <CategoryBadges labels={categoryLabels} />\n          <h3 className=\"Blueprint-title-small-emphasized md:Blueprint-title-medium-emphasized text-schemesOnSurface mb-0.5 md:mb-1 line-clamp-2\">\n            {item?.title}\n          </h3>\n          {excerpt && (\n            <p className=\"Blueprint-body-small text-schemesOnSurfaceVariant line-clamp-2\">\n              {excerpt}\n            </p>\n          )}\n        </div>\n      </div>\n    </a >\n  );\n});\n\nconst SkeletonRow = React.memo(() => (\n  <div className=\"rounded-xl border border-schemesOutlineVariant overflow-hidden bg-schemesSurface\">\n    <div className=\"flex gap-3 md:gap-4 p-3 md:p-4\">\n      <div className=\"w-14 h-14 md:w-16 md:h-16 rounded-xl bg-schemesSurfaceContainerHighest animate-pulse shrink-0\" />\n      <div className=\"flex-1 space-y-2\">\n        <div className=\"h-4 md:h-5 w-3/5 bg-schemesSurfaceContainerHigh animate-pulse rounded\" />\n        <div className=\"h-3 md:h-4 w-4/5 bg-schemesSurfaceContainerHigh animate-pulse rounded\" />\n        <div className=\"h-3 md:h-4 w-2/3 bg-schemesSurfaceContainerHigh animate-pulse rounded\" />\n      </div>\n    </div>\n  </div>\n));\n\nconst CategoryChips = React.memo(({ options, selected, onSelect }) => (\n  <div className=\"flex items-center gap-1.5 md:gap-2 overflow-x-auto pb-3 mb-2 md:mb-3 -mx-4 px-4 md:mx-0 md:px-0\">\n    <button\n      type=\"button\"\n      onClick={() => onSelect(\"\")}\n      className={`px-2.5 py-1.5 md:px-3 md:py-2 rounded-full whitespace-nowrap transition-colors Blueprint-label-small ${!selected\n        ? \"bg-gray-700 text-white\"\n        : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\n        }`}\n    >\n      All\n    </button>\n    {options.map((opt) => {\n      const isSelected = String(selected) === String(opt.id);\n      const color = getCategoryColor(opt.name, isSelected);\n      return (\n        <button\n          key={opt.id}\n          type=\"button\"\n          onClick={() => onSelect(opt.id)}\n          className={`px-2.5 py-1.5 md:px-3 md:py-2 rounded-full whitespace-nowrap transition-colors ${color.bg} ${color.text} ${!isSelected ? \"hover:opacity-80\" : \"\"\n            } Blueprint-label-small`}\n        >\n          {opt.name}\n        </button>\n      );\n    })}\n  </div>\n));\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Main Component\n// ─────────────────────────────────────────────────────────────────────────────\n\nexport default function MessageBoardArchivePage({\n  postType,\n  taxonomy,\n  currentTerm,\n  filters = [],\n  endpoint,\n  baseQuery = {},\n  title,\n  subtitle,\n  breadcrumbs = [],\n  categories = [],\n}) {\n  // ─────────────────────────────────────────────────────────────────────────\n  // Memoized lookups\n  // ─────────────────────────────────────────────────────────────────────────\n\n  // Build a Map for O(1) category lookups by name/slug\n  const categoriesMap = useMemo(() => {\n    const map = new Map();\n    categories.forEach((cat) => {\n      map.set(cat.name.toLowerCase(), cat);\n      map.set(cat.slug.toLowerCase(), cat);\n    });\n    return map;\n  }, [categories]);\n\n  // Identify category taxonomy for chips\n  const categoryTax = useMemo(() => {\n    const f = filters.find((f) => f.isCategory || CATEGORY_PATTERN.test(f.taxonomy));\n    return f?.taxonomy || null;\n  }, [filters]);\n\n  // Sidebar filters (exclude category tax)\n  const displayedFilters = useMemo(() =>\n    filters.filter((f) => f.taxonomy !== taxonomy && f.taxonomy !== categoryTax),\n    [filters, taxonomy, categoryTax]\n  );\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // State\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const [page, setPage] = useState(1);\n  const [selectedTerms, setSelectedTerms] = useState(() => {\n    if (taxonomy && currentTerm?.id) {\n      return { [taxonomy]: [String(currentTerm.id)] };\n    }\n    return {};\n  });\n  const [items, setItems] = useState([]);\n  const [totalPages, setTotalPages] = useState(1);\n  const [total, setTotal] = useState(undefined);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [debouncedSearch, setDebouncedSearch] = useState(\"\");\n  const [termsOptions, setTermsOptions] = useState({});\n  const [isFiltersOpen, setIsFiltersOpen] = useState(false);\n  const [retryTick, setRetryTick] = useState(0);\n\n  // Refs\n  const fetchSeqRef = useRef(0);\n  const fetchedTaxonomiesRef = useRef(new Set());\n  const firstCloseBtnRef = useRef(null);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // Debounce search\n  // ─────────────────────────────────────────────────────────────────────────\n\n  useEffect(() => {\n    const timer = setTimeout(() => setDebouncedSearch(searchQuery), 300);\n    return () => clearTimeout(timer);\n  }, [searchQuery]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // Load terms for filters (only taxonomies we need)\n  // ─────────────────────────────────────────────────────────────────────────\n\n  useEffect(() => {\n    const toFetch = displayedFilters\n      .filter((f) => !fetchedTaxonomiesRef.current.has(f.taxonomy))\n      .map((f) => f.taxonomy);\n\n    if (categoryTax && !fetchedTaxonomiesRef.current.has(categoryTax)) {\n      toFetch.unshift(categoryTax);\n    }\n\n    if (!toFetch.length) return;\n\n    let cancelled = false;\n\n    Promise.all(\n      toFetch.map(async (tax) => {\n        try {\n          const res = await fetch(\n            `/wp-json/tsb/v1/terms?taxonomy=${encodeURIComponent(tax)}&per_page=100`\n          );\n          if (!res.ok) throw new Error();\n          const json = await res.json();\n\n          const rows = (Array.isArray(json) ? json : []).map((t) => ({\n            id: String(t.id),\n            name: t.name,\n            slug: t.slug,\n            parent: String(t.parent ?? 0),\n          }));\n\n          const isHier = rows.some((r) => r.parent !== \"0\");\n          return {\n            tax,\n            data: isHier ? buildTreeAndDescendants(rows).tree : rows\n          };\n        } catch {\n          return { tax, data: [] };\n        }\n      })\n    ).then((results) => {\n      if (cancelled) return;\n\n      const next = {};\n      results.forEach(({ tax, data }) => {\n        next[tax] = data;\n        fetchedTaxonomiesRef.current.add(tax);\n      });\n\n      setTermsOptions((prev) => ({ ...prev, ...next }));\n    });\n\n    return () => { cancelled = true; };\n  }, [displayedFilters, categoryTax]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // Fetch posts\n  // ─────────────────────────────────────────────────────────────────────────\n\n  useEffect(() => {\n    let cancelled = false;\n    const seq = ++fetchSeqRef.current;\n\n    setLoading(true);\n    setError(\"\");\n\n    const payload = { ...baseQuery, page };\n\n    // Build tax query\n    const baseTax = Array.isArray(baseQuery.tax) ? baseQuery.tax : baseQuery.tax ? [baseQuery.tax] : [];\n    const uiTax = Object.entries(selectedTerms)\n      .filter(([, ids]) => ids?.length)\n      .map(([taxKey, ids]) => ({\n        taxonomy: taxKey,\n        field: \"term_id\",\n        terms: ids.map((id) => parseInt(id, 10)).filter(Number.isFinite),\n        operator: \"IN\",\n        include_children: true,\n      }));\n\n    const finalTax = [...baseTax, ...uiTax];\n    if (finalTax.length) {\n      payload.tax = finalTax;\n      if (baseQuery.tax_relation) payload.tax_relation = baseQuery.tax_relation;\n    }\n\n    fetch(endpoint, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload),\n    })\n      .then((res) => {\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        return res.json();\n      })\n      .then((json) => {\n        if (cancelled || seq !== fetchSeqRef.current) return;\n        setItems(json.items || []);\n        setTotalPages(json.total_pages || 1);\n        setTotal(json.total ?? undefined);\n      })\n      .catch((err) => {\n        if (cancelled || seq !== fetchSeqRef.current) return;\n        setError(err.message || \"Failed to load\");\n      })\n      .finally(() => {\n        if (cancelled || seq !== fetchSeqRef.current) return;\n        setLoading(false);\n      });\n\n    return () => { cancelled = true; };\n  }, [baseQuery, endpoint, page, selectedTerms, retryTick]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // Client-side search filtering\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const filteredItems = useMemo(() => {\n    const q = debouncedSearch.trim().toLowerCase();\n    if (!q) return items;\n\n    const words = q.split(/\\s+/).filter(Boolean);\n    return items.filter((item) => {\n      const searchText = [\n        item.title,\n        item.excerpt,\n        ...(item.categories || []),\n        ...Object.values(item.taxonomies || {}).flat().map((t) => t?.name || \"\"),\n      ]\n        .filter(Boolean)\n        .join(\" \")\n        .toLowerCase();\n\n      return words.every((w) => searchText.includes(w));\n    });\n  }, [items, debouncedSearch]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // Derived state\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const categoryOptions = termsOptions[categoryTax] || [];\n  const currentCategorySel = (selectedTerms[categoryTax] || [])[0] || \"\";\n  const isSearching = debouncedSearch.trim().length > 0;\n\n  const hasActiveFilters = useMemo(() =>\n    Object.entries(selectedTerms).some(\n      ([k, arr]) => k !== categoryTax && arr?.length > 0\n    ),\n    [selectedTerms, categoryTax]\n  );\n\n  const filterCount = useMemo(() => {\n    let count = isSearching ? 1 : 0;\n    for (const [k, arr] of Object.entries(selectedTerms)) {\n      if (k !== categoryTax) count += arr?.length || 0;\n    }\n    return count;\n  }, [selectedTerms, categoryTax, isSearching]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // Handlers\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const setCategory = useCallback((id) => {\n    setSelectedTerms((prev) => ({\n      ...prev,\n      [categoryTax]: id ? [String(id)] : []\n    }));\n    setPage(1);\n  }, [categoryTax]);\n\n  const handleFilterChange = useCallback((taxonomy, id, checked) => {\n    setSelectedTerms((prev) => {\n      const current = prev[taxonomy] || [];\n      const next = checked\n        ? [...current, id]\n        : current.filter((x) => x !== id);\n      return { ...prev, [taxonomy]: next };\n    });\n    setPage(1);\n  }, []);\n\n  const clearAllFilters = useCallback(() => {\n    setSelectedTerms((prev) => ({ [categoryTax]: prev[categoryTax] || [] }));\n    setPage(1);\n  }, [categoryTax]);\n\n  const closeFilters = useCallback(() => setIsFiltersOpen(false), []);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // Mobile drawer effects\n  // ─────────────────────────────────────────────────────────────────────────\n\n  useEffect(() => {\n    if (!isFiltersOpen) return;\n\n    const prev = document.body.style.overflow;\n    document.body.style.overflow = \"hidden\";\n\n    const onKey = (e) => {\n      if (e.key === \"Escape\") closeFilters();\n    };\n    window.addEventListener(\"keydown\", onKey);\n\n    setTimeout(() => firstCloseBtnRef.current?.focus(), 0);\n\n    return () => {\n      document.body.style.overflow = prev;\n      window.removeEventListener(\"keydown\", onKey);\n    };\n  }, [isFiltersOpen, closeFilters]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // Render\n  // ─────────────────────────────────────────────────────────────────────────\n\n  return (\n    <div className=\"archive-container bg-schemesSurface\">\n      {/* Header */}\n      <div className=\"bg-schemesPrimaryFixed py-6 md:py-8\">\n        <div className=\"tsb-container\">\n          <Breadcrumbs items={breadcrumbs} textColour=\"text-schemesPrimary\" />\n          <h1 className=\"Blueprint-headline-medium md:Blueprint-headline-large text-schemesOnSurface mb-1\">\n            {title}\n          </h1>\n          {subtitle && (\n            <p className=\"Blueprint-body-small md:Blueprint-body-medium text-schemesOnPrimaryFixedVariant\">\n              {subtitle}\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Mobile search + filters button */}\n      <div className=\"tsb-container pt-4 md:pt-6\">\n        <div className=\"lg:hidden flex items-center gap-2 mb-3 md:mb-4\">\n          <div className=\"relative flex-1\">\n            <input\n              type=\"search\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search...\"\n              className=\"Blueprint-body-medium w-full pl-4 pr-10 py-2.5 md:py-3 rounded-3xl bg-schemesSurfaceContainerHigh focus:outline-none focus:ring-2 focus:ring-schemesPrimary\"\n            />\n            <MagnifyingGlass\n              size={18}\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 text-schemesOnSurfaceVariant\"\n              weight=\"bold\"\n            />\n          </div>\n          <Button\n            onClick={() => setIsFiltersOpen(true)}\n            icon={<FunnelSimple />}\n            label={filterCount ? `(${filterCount})` : \"Filters\"}\n            variant=\"outlined\"\n            size=\"sm\"\n          />\n        </div>\n      </div>\n\n      <div className=\"tsb-container flex flex-col lg:flex-row py-2 md:py-4 lg:py-8 gap-4 md:gap-6 lg:gap-8\">\n        {/* Desktop sidebar */}\n        {displayedFilters.length > 0 && (\n          <aside className=\"hidden lg:block lg:w-64 xl:w-72 shrink-0\">\n            <div className=\"mb-6\">\n              <div className=\"bg-schemesSurfaceContainer flex items-center gap-2 rounded-full px-4 py-3\">\n                <input\n                  type=\"search\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  placeholder=\"Search by keyword\"\n                  className=\"w-full outline-none Blueprint-body-medium text-schemesOnSurface placeholder:text-schemesOnSurfaceVariant bg-transparent\"\n                />\n                {!searchQuery && (\n                  <MagnifyingGlass size={20} className=\"text-schemesOnSurfaceVariant\" weight=\"bold\" />\n                )}\n              </div>\n            </div>\n\n            <h2 className=\"Blueprint-headline-small-emphasized mb-4 text-schemesOnSurfaceVariant\">\n              Filters\n            </h2>\n\n            {(hasActiveFilters || searchQuery) && (\n              <div className=\"mb-4 flex flex-wrap gap-2\">\n                {hasActiveFilters && (\n                  <Button size=\"sm\" variant=\"tonal\" onClick={clearAllFilters} label=\"Clear filters\" />\n                )}\n                {searchQuery && (\n                  <Button size=\"sm\" variant=\"tonal\" onClick={() => setSearchQuery(\"\")} label=\"Clear search\" />\n                )}\n              </div>\n            )}\n\n            {displayedFilters.map((f) => (\n              <div key={f.taxonomy} className=\"mb-4\">\n                <FilterGroup\n                  title={f.label || f.taxonomy}\n                  options={termsOptions[f.taxonomy] || []}\n                  selected={selectedTerms[f.taxonomy] || []}\n                  onChangeHandler={(e) => {\n                    handleFilterChange(f.taxonomy, String(e.target.value), e.target.checked);\n                  }}\n                />\n              </div>\n            ))}\n          </aside>\n        )}\n\n        {/* Main content */}\n        <section className=\"flex-1 min-w-0\">\n          {/* Category chips */}\n          {categoryTax && categoryOptions.length > 0 && (\n            <CategoryChips\n              options={categoryOptions}\n              selected={currentCategorySel}\n              onSelect={setCategory}\n            />\n          )}\n\n          {/* Error state */}\n          {error && !loading && (\n            <div className=\"mb-6 md:mb-8 rounded-xl border border-schemesOutlineVariant bg-schemesSurface p-4 md:p-6\">\n              <div className=\"Blueprint-title-small-emphasized mb-2 text-schemesError\">\n                Something went wrong\n              </div>\n              <p className=\"Blueprint-body-medium text-schemesOnSurfaceVariant mb-4\">{error}</p>\n              <div className=\"flex flex-wrap gap-2\">\n                <Button variant=\"filled\" label=\"Try again\" onClick={() => setRetryTick((n) => n + 1)} />\n                {hasActiveFilters && (\n                  <Button variant=\"tonal\" label=\"Clear filters\" onClick={clearAllFilters} />\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Loading state */}\n          {loading && (\n            <div className=\"space-y-3 md:space-y-4 mb-6 md:mb-8\">\n              {Array.from({ length: 6 }).map((_, i) => (\n                <SkeletonRow key={i} />\n              ))}\n            </div>\n          )}\n\n          {/* Empty state */}\n          {!loading && !error && filteredItems.length === 0 && (\n            <div className=\"rounded-2xl border border-schemesOutlineVariant bg-schemesSurface p-6 md:p-10 text-center mb-6 md:mb-8\">\n              <div className=\"Blueprint-headline-small mb-2\">No results found</div>\n              <p className=\"Blueprint-body-medium text-schemesOnSurfaceVariant mb-6\">\n                {searchQuery\n                  ? \"Try a different keyword or clear search.\"\n                  : \"Try adjusting or clearing your filters.\"}\n              </p>\n              <div className=\"flex justify-center flex-wrap gap-3\">\n                {searchQuery ? (\n                  <Button variant=\"filled\" label=\"Clear search\" onClick={() => setSearchQuery(\"\")} />\n                ) : (\n                  <Button variant=\"filled\" label=\"Clear all filters\" onClick={clearAllFilters} />\n                )}\n                <Button variant=\"tonal\" label=\"Reload\" onClick={() => setRetryTick((n) => n + 1)} />\n              </div>\n            </div>\n          )}\n\n          {/* Results */}\n          {!loading && !error && filteredItems.length > 0 && (\n            <>\n              <div className=\"mb-2 md:mb-3\">\n                <p className=\"Blueprint-body-small md:Blueprint-body-medium text-schemesOnSurfaceVariant\">\n                  {isSearching\n                    ? `${filteredItems.length} match${filteredItems.length === 1 ? \"\" : \"es\"}`\n                    : typeof total === \"number\"\n                      ? `${total.toLocaleString()} result${total === 1 ? \"\" : \"s\"}`\n                      : null}\n                </p>\n              </div>\n\n              <div className=\"space-y-3 md:space-y-4 mb-6 md:mb-8\">\n                {filteredItems.map((item) => (\n                  <MessageRow\n                    key={item.id}\n                    item={item}\n                    categoriesMap={categoriesMap}\n                  />\n                ))}\n              </div>\n            </>\n          )}\n\n          {/* Pagination */}\n          {!loading && !error && totalPages > 1 && !isSearching && (\n            <div className=\"flex justify-center items-center gap-2 md:gap-3\">\n              <Button\n                size=\"sm\"\n                variant=\"tonal\"\n                disabled={page <= 1}\n                onClick={() => setPage((p) => Math.max(1, p - 1))}\n                label=\"Prev\"\n              />\n              <span className=\"Blueprint-body-small md:Blueprint-body-medium text-schemesOnSurfaceVariant\">\n                {page} / {totalPages}\n              </span>\n              <Button\n                size=\"sm\"\n                variant=\"tonal\"\n                disabled={page >= totalPages}\n                onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\n                label=\"Next\"\n              />\n            </div>\n          )}\n        </section>\n      </div>\n\n      {/* Mobile filters drawer */}\n      <div\n        className={`lg:hidden fixed inset-0 z-[70] ${isFiltersOpen ? \"\" : \"pointer-events-none\"}`}\n        aria-hidden={!isFiltersOpen}\n      >\n        <div\n          onClick={closeFilters}\n          className={`absolute inset-0 transition-opacity duration-200 ${isFiltersOpen ? \"opacity-100 bg-black/40\" : \"opacity-0\"\n            }`}\n        />\n\n        <div\n          role=\"dialog\"\n          aria-modal=\"true\"\n          className={`absolute left-0 right-0 bottom-0 max-h-[85vh] rounded-t-2xl bg-schemesSurface shadow-[0_-16px_48px_rgba(0,0,0,0.25)] transition-transform duration-300 flex flex-col ${isFiltersOpen ? \"translate-y-0\" : \"translate-y-full\"\n            }`}\n        >\n          <div className=\"px-4 py-3 border-b border-schemesOutlineVariant shrink-0\">\n            <div className=\"mx-auto h-1.5 w-12 rounded-full bg-schemesOutlineVariant\" />\n            <div className=\"mt-3 flex items-center justify-between\">\n              <span className=\"Blueprint-title-small-emphasized\">Filters</span>\n              <button\n                ref={firstCloseBtnRef}\n                type=\"button\"\n                onClick={closeFilters}\n                className=\"rounded-full p-2 hover:bg-schemesSurfaceContainerHigh text-schemesOnSurfaceVariant\"\n              >\n                <X size={20} />\n              </button>\n            </div>\n          </div>\n\n          <div className=\"px-4 py-4 overflow-y-auto flex-1 space-y-4\">\n            <div className=\"relative\">\n              <input\n                type=\"search\"\n                placeholder=\"Search...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"Blueprint-body-medium w-full pl-4 pr-10 py-2.5 rounded-3xl bg-schemesSurfaceContainerHigh focus:outline-none focus:ring-2 focus:ring-schemesPrimary\"\n              />\n              <MagnifyingGlass\n                size={18}\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-schemesOnSurfaceVariant\"\n                weight=\"bold\"\n              />\n            </div>\n\n            {displayedFilters.map((f) => (\n              <FilterGroup\n                key={`m-${f.taxonomy}`}\n                title={f.label || f.taxonomy}\n                options={termsOptions[f.taxonomy] || []}\n                selected={selectedTerms[f.taxonomy] || []}\n                onChangeHandler={(e) => {\n                  handleFilterChange(f.taxonomy, String(e.target.value), e.target.checked);\n                }}\n              />\n            ))}\n          </div>\n\n          <div className=\"px-4 py-3 bg-schemesSurface border-t border-schemesOutlineVariant flex gap-2 shrink-0\">\n            <Button onClick={clearAllFilters} variant=\"outlined\" label=\"Clear all\" className=\"flex-1\" />\n            <Button onClick={closeFilters} variant=\"filled\" label=\"Apply\" className=\"flex-1\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","export function StyledCheckbox({ id, label, onChangeHandler, checked }) {\n  return (\n    <div key={id}>\n      <input\n        type=\"checkbox\"\n        id={`filter-${id}`}\n        value={id}\n        checked={checked} // ✅ controlled by parent\n        className=\"peer hidden\"\n        onChange={onChangeHandler}\n      />\n      <label\n        htmlFor={`filter-${id}`}\n        className=\"cursor-pointer px-3 py-2 rounded-md Blueprint-label-small\n                  transition-colors duration-200\n                  peer-checked:bg-gray-500 peer-checked:text-white peer-checked:border-grey-700\n                  peer-not-checked:bg-[var(--schemesSurfaceContainer)] peer-not-checked:text-gray-700 peer-not-checked:border-gray-300\"\n      >\n        {label}\n      </label>\n    </div>\n  )\n}"],"names":["React","jsx","_jsx","jsxs","_jsxs","Breadcrumbs","items","textColour","length","filteredItems","map","it","url","includes","replace","className","children","i","Fragment","href","label","clsx","Button","size","variant","shape","icon","disabled","onClick","type","sizeStyles","xs","sm","base","lg","xl","rounded","square","pill","variantStyles","filled","tonal","outline","elevated","text","disabledStyles","baseCursor","useMemo","StyledCheckbox","CaretRight","FilterGroup","title","options","selected","onChangeHandler","expanded","onToggleExpand","onShowLess","initialShowCount","isNested","Array","isArray","some","o","parents","totalCount","hasMore","displayCount","isChecked","id","String","collectDescendantIds","node","bag","forEach","c","push","anyChildSelected","kids","fireChange","checked","target","value","onParentChange","onChildChange","parentNode","childNode","ChildRow","isLast","depth","show","hasKids","style","marginLeft","weight","name","e","g","idx","renderParent","hasChildren","child","slice","option","useEffect","useState","useRef","useCallback","MagnifyingGlass","FunnelSimple","X","_Fragment","CATEGORY_COLORS","bg","selectedBg","hashString","str","hash","charCodeAt","Math","abs","getCategoryColor","isSelected","color","stripTags","html","tmp","document","createElement","innerHTML","textContent","innerText","trim","CATEGORY_PATTERN","extractCategoryLabels","item","seen","Set","labels","val","toString","key","toLowerCase","has","add","categories","taxonomies","tx","arr","Object","entries","test","k","keys","v","buildTreeAndDescendants","rows","byId","r","_r$parent","slug","parent","roots","p","descendants","collect","n","acc","sortTree","nodes","sort","a","b","localeCompare","tree","LeadingIcon","memo","categoryLabels","categoriesMap","imageUrl","faIcon","match","get","image_url","fa_icon","src","startsWith","alt","loading","backgroundColor","letter","toUpperCase","CategoryBadges","MessageRow","permalink","excerpt","SkeletonRow","CategoryChips","onSelect","opt","MessageBoardArchivePage","postType","taxonomy","currentTerm","filters","endpoint","baseQuery","subtitle","breadcrumbs","Map","cat","set","categoryTax","f","find","isCategory","displayedFilters","filter","page","setPage","selectedTerms","setSelectedTerms","setItems","totalPages","setTotalPages","total","setTotal","undefined","setLoading","error","setError","searchQuery","setSearchQuery","debouncedSearch","setDebouncedSearch","termsOptions","setTermsOptions","isFiltersOpen","setIsFiltersOpen","retryTick","setRetryTick","fetchSeqRef","fetchedTaxonomiesRef","firstCloseBtnRef","timer","setTimeout","clearTimeout","toFetch","current","unshift","cancelled","Promise","all","tax","res","fetch","encodeURIComponent","ok","Error","json","t","_t$parent","isHier","data","then","results","next","prev","seq","payload","baseTax","uiTax","ids","taxKey","field","terms","parseInt","Number","isFinite","operator","include_children","finalTax","tax_relation","method","headers","body","JSON","stringify","status","_json$total","total_pages","catch","err","message","finally","q","words","split","Boolean","searchText","values","flat","join","every","w","categoryOptions","currentCategorySel","isSearching","hasActiveFilters","filterCount","count","setCategory","handleFilterChange","x","clearAllFilters","closeFilters","overflow","onKey","window","addEventListener","focus","removeEventListener","onChange","placeholder","from","_","toLocaleString","max","min","role","ref","htmlFor"],"sourceRoot":""}